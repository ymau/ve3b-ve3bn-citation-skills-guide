<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VE3B & VE3BN- Guide to Citing Sources in Workplace Emails</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

<style>
:root{
  /* Balanced Sunset palette with pastels */
  --bg1:#fff9f0;     /* warm cream */
  --bg2:#f0f9ff;     /* soft sky blue */
  --bg3:#f0fdf4;     /* mint cream */
  --bg4:#fffef0;     /* pale vanilla */
  --accent:#ff8c00;  /* dark orange - primary */
  --accent-2:#ffb347;/* soft orange */
  --accent-light:#ffd699; /* peach */
  --blue:#3b82f6;    /* sky blue accent */
  --blue-light:#dbeafe; /* pale blue */
  --green:#10b981;   /* emerald accent */
  --green-light:#d1fae5; /* pale mint */
  --yellow:#fbbf24;  /* amber */
  --yellow-light:#fef3c7; /* pale yellow */
  --pink:#ec4899;    /* pink accent */
  --ink:#4a2c2a;     /* dark brown */
  --ink-light:#6e5a52; /* medium brown */
  --muted:#8b7355;   /* warm grey-brown */
  --card-bg: rgba(255,255,255,0.96);
  --ring: rgba(255,140,0,0.25);
  --shadow: 0 10px 30px rgba(74,44,42,0.1);
  --shadow-soft: 0 4px 12px rgba(74,44,42,0.08);
  --radius: 18px;
  --success:#10b981;
  --success-bg:#d1fae5;
  --success-border:#6ee7b7;
  --error:#dc2626;
  --error-bg:#fee2e2;
  --error-border:#fca5a5;
}

html {
  -webkit-tap-highlight-color: transparent;
  -webkit-text-size-adjust: 100%;
}

body {
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

*, *::before, *::after {
  -webkit-tap-highlight-color: transparent;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;}
body{
  font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--ink);
  overflow:hidden;
}

/* Multi-colour gradient background */
.bg{
  position:fixed;inset:0;z-index:-1;
  background:
    radial-gradient(circle at 15% 20%, var(--bg1), transparent 50%),
    radial-gradient(circle at 85% 25%, var(--bg2), transparent 50%),
    radial-gradient(circle at 50% 80%, var(--bg3), transparent 50%),
    radial-gradient(circle at 20% 70%, var(--bg4), transparent 50%),
    linear-gradient(135deg,#fffef9,#fafcff 50%,#fdfff7);
  animation:float 35s ease-in-out infinite alternate;
}
@keyframes float{
  0%{filter:hue-rotate(0deg) brightness(1);}
  100%{filter:hue-rotate(15deg) brightness(1.03);}
}

.app{
  display:grid;grid-template-rows:auto 1fr auto;
  height:100dvh;width:100%;
  padding:18px clamp(12px,3vw,28px);
}

.topbar{
  display:flex;align-items:center;justify-content:space-between;
  gap:12px;padding:8px 12px;
}

.brand{
  display:flex;align-items:center;gap:10px;
  font-weight:700;color:var(--accent);letter-spacing:.2px;
  font-size:1.05rem;
}

.brand-badge{
  width:38px;height:38px;border-radius:11px;
  background:linear-gradient(135deg,var(--accent),var(--pink),var(--blue));
  box-shadow:0 8px 24px rgba(236,72,153,0.35);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.2rem;
}

.quicknav{display:flex;gap:8px;flex-wrap:wrap;}
.quicknav button{
  appearance:none;
  border:1px solid rgba(59,130,246,0.12);
  background:rgba(255,255,255,0.9);
  color:var(--muted);
  padding:8px 14px;
  border-radius:12px;
  font-weight:500;
  font-size:0.82rem;
  font-family:'Poppins', system-ui, -apple-system, sans-serif;
  cursor:pointer;
  transition:all .25s ease;
  box-shadow: var(--shadow-soft);
}
.quicknav button:hover{
  transform:translateY(-2px);
  border-color:var(--blue);
  background:var(--blue-light);
  box-shadow:0 6px 16px rgba(59,130,246,0.15);
}
.quicknav .active{
  border-color:var(--accent);
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:#fff;
  box-shadow:0 6px 18px var(--ring);
}

.viewport{
  position:relative;height:100%;width:100%;
  display:flex;align-items:center;justify-content:center;
  padding:clamp(8px,2.2vw,18px);
}

.page{
  position:absolute;
  inset:0;
  margin:auto;
  max-width:1100px;
  height:calc(100% - 16px);
  width:calc(100% - 16px);
  background:var(--card-bg);
  backdrop-filter:blur(10px);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  border:1px solid rgba(59,130,246,0.08);
  display:none;
  overflow:auto;
  scroll-behavior:smooth;
  scrollbar-width:none;
}

.page::-webkit-scrollbar{
  width:0;
  height:0;
}

@media(max-width:600px){
  .page{
    width:100%;
    height:100%;
    border-radius:0;
    border:none;
    box-shadow:none;
  }
}

.page.visible{display:block;animation:fadeIn .4s ease;}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(8px);}
  to{opacity:1;transform:none;}
}

.page-inner{padding:clamp(16px,3.2vw,32px);}

/* Enhanced typography */
h1{
  font-size:clamp(1.6rem,2.2vw,2.2rem);
  margin:0 0 8px;
  color:var(--accent);
  font-weight:700;
  line-height:1.2;
}

h2{
  font-size:clamp(1.2rem,1.8vw,1.6rem);
  margin:18px 0 12px;
  color:var(--ink);
  font-weight:700;
  line-height:1.3;
}

h3{
  font-size:clamp(1.05rem,1.4vw,1.2rem);
  margin:16px 0 10px;
  color:var(--ink);
  font-weight:600;
  line-height:1.4;
}

.lead{
  color:var(--ink-light);
  font-weight:500;
  font-size:1.05rem;
  line-height:1.5;
}

p{margin:0 0 .9rem;line-height:1.6;}

/* Multi-coloured blocks */
.block{
  background:linear-gradient(135deg, rgba(255,255,255,0.95), rgba(250,252,255,0.95));
  border:1px solid rgba(59,130,246,0.12);
  padding:clamp(16px,2.6vw,24px);
  border-radius:15px;
  box-shadow:var(--shadow-soft);
  margin:14px 0;
  transition:all .3s ease;
}

.block:hover{
  box-shadow:0 8px 24px rgba(59,130,246,0.15);
  transform:translateY(-2px);
  border-color:rgba(59,130,246,0.2);
}

/* Alternate block colours for variety */
.block:nth-child(odd){
  background:linear-gradient(135deg, rgba(255,255,255,0.95), rgba(254,252,232,0.95));
  border-color:rgba(251,191,36,0.12);
}

/* Kicker with soft blue/green tones */
.kicker{
  display:inline-block;
  font-size:.8rem;
  font-weight:700;
  letter-spacing:.4px;
  color:#047857; /* emerald 700 */
  background:linear-gradient(135deg,var(--green-light),var(--blue-light));
  padding:7px 14px;
  border-radius:999px;
  margin-bottom:10px;
  box-shadow:0 3px 10px rgba(16,185,129,0.15);
  border:1px solid rgba(110,231,183,0.3);
}

ul{padding-left:1.3em;margin:0 0 .9rem;}
li{margin:7px 0;line-height:1.5;}
.checklist li::marker{color:var(--green);}

/* Soft blue callout */
.callout{
  border-left:5px solid var(--blue);
  background:linear-gradient(135deg,var(--blue-light),#f0f9ff);
  padding:14px 16px;
  border-radius:12px;
  margin:10px 0;
  font-size:.95rem;
  box-shadow:var(--shadow-soft);
  border-top-left-radius:0;
  border-bottom-left-radius:0;
}

.callout strong{
  color:var(--blue);
}

.tip{
  border-left-color:var(--yellow);
  background:linear-gradient(135deg,var(--yellow-light),#fffbeb);
}

.tip strong{
  color:#d97706;
}

/* Hero section */
.hero{
  display:grid;
  gap:4px;
  align-content:flex-start;
  min-height:16vh;
  text-align:center;
  margin-top:8px;
}

.hero h1{
  font-size:clamp(2rem,3.2vw,2.8rem);
  margin-bottom:4px;
  background:linear-gradient(135deg,var(--accent),var(--pink),var(--blue));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

.hero .cta{
  margin-top:12px;
  display:flex;
  gap:8px;
  justify-content:center;
  flex-wrap:wrap;
}

/* Soft multi-colour badge */
.badge{
  display:inline-block;
  padding:7px 14px;
  border-radius:999px;
  font-weight:600;
  font-size:.82rem;
  background:linear-gradient(135deg,var(--blue-light),var(--yellow-light));
  color:var(--blue);
  margin-bottom:10px;
  border:1px solid rgba(59,130,246,0.25);
  letter-spacing:.3px;
}

.grid{display:grid;gap:16px;}
.grid-2{grid-template-columns:repeat(2,minmax(0,1fr));}
@media(max-width:860px){.grid-2{grid-template-columns:1fr;}}

.small{font-size:.9rem;color:var(--muted);line-height:1.5;}
hr.sep{border:none;height:1px;background:rgba(59,130,246,0.12);margin:14px 0;}

/* Footer navigation */
.footer{
  display:flex;align-items:center;justify-content:space-between;
  gap:12px;padding:10px 8px;
}

.nav-buttons{display:flex;gap:10px;flex-wrap:wrap;}
.btn{
  appearance:none;cursor:pointer;
  border:1px solid rgba(59,130,246,0.15);
  background:#fff;
  padding:11px 18px;
  border-radius:12px;
  font-weight:600;
  color:var(--ink);
  box-shadow:var(--shadow-soft);
  transition:all .25s ease;
  font-size:.92rem;
  font-family:'Poppins',system-ui,sans-serif;
}

.btn:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 20px rgba(59,130,246,0.15);
  border-color:var(--blue);
}

.btn.primary{
  background:linear-gradient(135deg,var(--accent),var(--pink),var(--blue));
  color:#fff;
  border-color:transparent;
  box-shadow:0 10px 28px rgba(236,72,153,0.3);
}

.btn.primary:hover{
  box-shadow:0 12px 32px rgba(236,72,153,0.4);
  transform:translateY(-3px);
}

.btn.ghost{
  background:rgba(255,255,255,0.7);
  color:var(--blue);
  border-color:rgba(59,130,246,0.3);
}

.btn.small{padding:9px 14px;font-size:.88rem;}

.btn:disabled{
  opacity:0.5;
  cursor:not-allowed;
  transform:none !important;
}

.progress{
  display:flex;align-items:center;gap:10px;color:var(--muted);font-weight:600;
  font-size:.9rem;
}

.dotbar{display:flex;gap:7px;}
.dot{
  width:11px;height:11px;border-radius:999px;
  background:rgba(59,130,246,0.2);
  transition:all .3s ease;
  cursor:pointer;
}

.dot:hover{
  background:rgba(59,130,246,0.4);
  transform:scale(1.15);
}

.dot.active{
  background:linear-gradient(135deg,var(--accent),var(--pink));
  box-shadow:0 3px 10px rgba(236,72,153,0.3);
  transform:scale(1.2);
}

/* Interactive elements with varied colours */
.task-icon {
  width:56px;
  height:56px;
  border-radius:999px;
  background:linear-gradient(135deg,var(--blue),var(--green));
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-size:1.6rem;
  box-shadow:0 8px 22px rgba(59,130,246,0.25);
  margin:0 auto 14px;
}

.interactive-box {
  background:linear-gradient(135deg,var(--yellow-light),var(--blue-light));
  border:1px solid rgba(251,191,36,0.2);
  border-radius:14px;
  padding:18px;
  margin-top:12px;
}

.email-sample {
  background:#ffffff;
  border:1px solid rgba(59,130,246,0.15);
  border-radius:12px;
  padding:16px;
  font-size:0.92rem;
  line-height:1.75;
  margin-top:10px;
  box-shadow:var(--shadow-soft);
}

.email-sample.no-cite {
  border-color:rgba(220,38,38,0.2);
  background:linear-gradient(135deg,#fff,#fef2f2);
}

.email-sample.with-cite {
  border-color:rgba(16,185,129,0.2);
  background:linear-gradient(135deg,#fff,#f0fdf4);
}

.email-sample.editable {
  border-color:rgba(251,191,36,0.3);
  background:linear-gradient(135deg,#fff,#fffbeb);
}

.cite-highlight {
  background:rgba(251,191,36,0.25);
  padding:2px 4px;
  border-radius:4px;
  font-weight:600;
  color:var(--ink);
}

.editable-text {
  background:rgba(220,38,38,0.15);
  padding:2px 6px;
  border-radius:4px;
  cursor:pointer;
  transition:all 0.25s;
  border-bottom:2px dashed var(--error);
  position:relative;
  display:inline-block;
}

.editable-text:hover {
  background:rgba(220,38,38,0.25);
  transform:translateY(-1px);
}

.editable-text.fixed {
  background:var(--success-bg);
  border-bottom-color:var(--success);
  border-bottom-style:solid;
  cursor:default;
  font-weight:600;
}

.editable-text::after {
  content:'‚úèÔ∏è';
  font-size:0.75em;
  position:absolute;
  top:-8px;
  right:-8px;
  opacity:0;
  transition:opacity 0.2s;
}

.editable-text:hover::after {
  opacity:1;
}

.editable-text.fixed::after {
  content:'‚úì';
  color:var(--success);
  opacity:1;
}

.highlight {
  background:var(--yellow-light);
  padding:2px 5px;
  border-radius:4px;
  cursor:pointer;
  transition:all 0.25s;
  border-bottom:2px solid transparent;
}

.highlight:hover {
  background:#fde68a;
  border-bottom-color:var(--yellow);
}

.highlight.clicked {
  background:var(--green-light);
  border-bottom-color:var(--green);
  font-weight:600;
}

.chip-grid {
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-top:12px;
}

.chip {
  background:linear-gradient(135deg,var(--blue-light),#f0f9ff);
  border:2px solid rgba(59,130,246,0.25);
  border-radius:999px;
  padding:10px 16px;
  font-size:0.9rem;
  transition:all .25s ease;
  cursor:pointer;
  user-select:none;
  position:relative;
}

.chip:hover{
  box-shadow:0 4px 12px rgba(59,130,246,0.2);
  transform:translateY(-2px);
}

.chip.selected {
  background:linear-gradient(135deg,var(--accent-light),var(--accent));
  border-color:var(--accent);
  border-width:3px;
  color:#fff;
  font-weight:700;
  transform:scale(1.08);
  box-shadow:0 6px 18px var(--ring);
}

.chip.survey-placed {
  background:linear-gradient(135deg,var(--blue-light),var(--blue));
  border-color:var(--blue);
  color:#fff;
  font-weight:600;
  cursor:default;
}

.chip.survey-placed::before {
  content:'üìä';
  margin-right:6px;
}

.chip.forum-placed {
  background:linear-gradient(135deg,var(--yellow-light),var(--yellow));
  border-color:var(--yellow);
  color:#744210;
  font-weight:600;
  cursor:default;
}

.chip.forum-placed::before {
  content:'üí¨';
  margin-right:6px;
}

.chip strong {
  color:var(--accent);
  font-weight:700;
}

.bucket-container {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  margin-top:20px;
}

@media(max-width:680px){
  .bucket-container{
    grid-template-columns:1fr;
  }
}

.bucket {
  background:#fff;
  border:3px dashed rgba(59,130,246,0.3);
  border-radius:12px;
  padding:16px;
  min-height:140px;
  transition:all .3s ease;
}

.bucket.survey-bucket {
  border-color:var(--blue);
  background:linear-gradient(135deg,rgba(59,130,246,0.05),rgba(255,255,255,0.95));
}

.bucket.forum-bucket {
  border-color:var(--yellow);
  background:linear-gradient(135deg,rgba(251,191,36,0.05),rgba(255,255,255,0.95));
}

.bucket h4 {
  margin:0 0 12px;
  font-size:1rem;
  display:flex;
  align-items:center;
  gap:8px;
}

.bucket.survey-bucket h4 {
  color:var(--blue);
}

.bucket.forum-bucket h4 {
  color:#92400e;
}

.bucket-items {
  display:flex;
  flex-direction:column;
  gap:8px;
}

.bucket-chip {
  background:#fff;
  border:2px solid;
  border-radius:8px;
  padding:8px 12px;
  font-size:0.85rem;
  font-weight:600;
}

.bucket.survey-bucket .bucket-chip {
  border-color:var(--blue);
  color:var(--blue);
}

.bucket.forum-bucket .bucket-chip {
  border-color:var(--yellow);
  color:#92400e;
}

.category-buttons {
  display:flex;
  gap:10px;
  justify-content:center;
  margin-top:16px;
}

.category-btn {
  padding:12px 24px;
  border:2px solid;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
  transition:all .25s ease;
  font-size:0.9rem;
  background:#fff;
  display:flex;
  align-items:center;
  gap:8px;
}

.category-btn.survey {
  border-color:var(--blue);
  color:var(--blue);
}

.category-btn.forum {
  border-color:var(--yellow);
  color:#92400e;
}

.category-btn:hover {
  transform:scale(1.05);
  box-shadow:0 4px 12px rgba(0,0,0,0.15);
}

.category-btn.active {
  transform:scale(1.08);
  box-shadow:0 6px 16px rgba(0,0,0,0.2);
}

.category-btn.survey:hover,
.category-btn.survey.active {
  background:var(--blue-light);
}

.category-btn.forum:hover,
.category-btn.forum.active {
  background:var(--yellow-light);
}

.quiz-options {
  display:grid;
  gap:10px;
  margin-top:12px;
}

.quiz-options label {
  display:flex;
  gap:12px;
  align-items:flex-start;
  background:#ffffff;
  border:2px solid rgba(59,130,246,0.12);
  border-radius:12px;
  padding:12px 14px;
  cursor:pointer;
  transition:all 0.25s;
}

.quiz-options label:hover {
  border-color:var(--blue);
  background:linear-gradient(135deg,var(--blue-light),#f0f9ff);
  transform:translateX(4px);
}

.quiz-options input[type="radio"] {
  margin-top:4px;
  accent-color:var(--accent);
}

.quiz-options label.correct {
  border-color:var(--success);
  background:var(--success-bg);
}

.quiz-options label.incorrect {
  border-color:var(--error);
  background:var(--error-bg);
}

.feedback {
  margin-top:12px;
  padding:12px 16px;
  border-radius:10px;
  font-size:0.92rem;
  font-weight:600;
  display:none;
  line-height:1.5;
}

.feedback.show {
  display:block;
  animation:slideIn .3s ease;
}

@keyframes slideIn{
  from{opacity:0;transform:translateY(-5px);}
  to{opacity:1;transform:none;}
}

.feedback.good {
  background:var(--success-bg);
  color:#065f46; /* emerald 800 */
  border:2px solid var(--success-border);
}

.feedback.bad {
  background:var(--error-bg);
  color:var(--error);
  border:2px solid var(--error-border);
}

.feedback.info {
  background:var(--blue-light);
  color:#1e40af;
  border:2px solid var(--blue);
}

textarea {
  width:100%;
  min-height:110px;
  padding:14px;
  font-family:inherit;
  font-size:0.92rem;
  border:2px solid rgba(59,130,246,0.2);
  border-radius:12px;
  margin-top:10px;
  resize:vertical;
  transition:all .25s ease;
}

textarea:focus{
  outline:none;
  border-color:var(--blue);
  box-shadow:0 0 0 3px rgba(59,130,246,0.15);
}

.data-table {
  width:100%;
  margin-top:12px;
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  border:1px solid rgba(59,130,246,0.1);
}

.data-row {
  display:flex;
  justify-content:space-between;
  padding:12px 14px;
  border-bottom:1px solid rgba(59,130,246,0.1);
  transition:all .2s ease;
}

.data-row:hover{
  background:linear-gradient(135deg,var(--blue-light),var(--green-light));
}

.data-row:last-child {
  border-bottom:none;
}

.data-issue {
  font-weight:500;
  color:var(--ink);
}

.data-percent {
  color:var(--accent);
  font-weight:700;
}

/* Comparison table */
.comparison-table {
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  margin-top:12px;
  border-radius:12px;
  overflow:hidden;
  box-shadow:var(--shadow-soft);
}

.comparison-table th {
  background:linear-gradient(135deg,var(--blue),var(--accent));
  color:#fff;
  padding:14px;
  text-align:left;
  font-weight:700;
  font-size:0.95rem;
}

.comparison-table td {
  background:#fff;
  padding:12px 14px;
  border-bottom:1px solid rgba(59,130,246,0.1);
  font-size:0.9rem;
  line-height:1.6;
}

.comparison-table tr:last-child td {
  border-bottom:none;
}

.comparison-table td:first-child {
  font-weight:600;
  color:var(--ink);
  width:25%;
}

/* Citation example blocks */
.citation-example {
  background:#fff;
  border-left:4px solid;
  border-radius:8px;
  padding:14px;
  margin:12px 0;
  font-family:'Consolas','Monaco','Menlo',monospace;
  font-size:0.88rem;
  line-height:1.7;
  box-shadow:var(--shadow-soft);
}

.citation-example.apa {
  border-color:#e11d48;
  background:linear-gradient(135deg,#fff,#fef2f4);
}

.citation-example.harvard {
  border-color:var(--blue);
  background:linear-gradient(135deg,#fff,#f0f9ff);
}

.citation-example.mla {
  border-color:var(--green);
  background:linear-gradient(135deg,#fff,#f0fdf4);
}

.citation-example.chicago {
  border-color:var(--yellow);
  background:linear-gradient(135deg,#fff,#fffbeb);
}

.citation-label {
  font-weight:700;
  font-size:0.75rem;
  text-transform:uppercase;
  letter-spacing:0.5px;
  margin-bottom:8px;
  display:inline-block;
  padding:3px 8px;
  border-radius:4px;
}

.citation-example.apa .citation-label {
  background:#fce7f3;
  color:#e11d48;
}

.citation-example.harvard .citation-label {
  background:var(--blue-light);
  color:var(--blue);
}

.citation-example.mla .citation-label {
  background:var(--green-light);
  color:var(--green);
}

.citation-example.chicago .citation-label {
  background:var(--yellow-light);
  color:#92400e;
}

.cite-author {
  color:#e11d48;
  font-weight:700;
}

.cite-year {
  color:var(--blue);
  font-weight:700;
}

.cite-title {
  color:var(--green);
  font-style:italic;
}

.cite-source {
  color:#92400e;
}

.cite-pages {
  color:var(--pink);
}

/* Match pairs - TWO COLUMN GRID */
.match-container {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
  margin-top:12px;
}

@media(max-width:680px){
  .match-container{
    grid-template-columns:1fr;
  }
}

.match-col h4 {
  font-size:0.95rem;
  color:var(--blue);
  margin:0 0 10px;
  font-weight:700;
}

.match-item {
  background:#fff;
  border:2px solid rgba(59,130,246,0.15);
  border-radius:10px;
  padding:12px;
  margin-bottom:8px;
  cursor:pointer;
  transition:all .25s ease;
  font-size:0.9rem;
  position:relative;
}

.match-item:hover {
  border-color:var(--blue);
  transform:translateX(3px);
}

.match-item.selected {
  background:linear-gradient(135deg,var(--accent-light),#fff);
  border-color:var(--accent);
  border-width:3px;
  font-weight:600;
}

.match-item.matched {
  background:linear-gradient(135deg,var(--yellow-light),#fff);
  border-color:var(--yellow);
  opacity:0.7;
}

.match-item.correct {
  background:var(--success-bg);
  border-color:var(--success);
  color:#065f46;
  font-weight:700;
  pointer-events:none;
}

/* Fill-in-blank */
.fill-blank {
  display:inline-block;
  min-width:120px;
  padding:4px 8px;
  border-bottom:2px solid var(--blue);
  font-weight:600;
  color:var(--blue);
  margin:0 4px;
}

input.blank-input {
  display:inline-block;
  min-width:140px;
  padding:6px 10px;
  border:2px solid rgba(59,130,246,0.3);
  border-radius:8px;
  font-family:inherit;
  font-size:0.9rem;
  margin:0 4px;
  transition:all .25s ease;
}

input.blank-input:focus {
  outline:none;
  border-color:var(--blue);
  box-shadow:0 0 0 3px rgba(59,130,246,0.15);
}

input.blank-input.correct {
  border-color:var(--success);
  background:var(--success-bg);
}

input.blank-input.incorrect {
  border-color:var(--error);
  background:var(--error-bg);
}

select.blank-input {
  display:inline-block;
  min-width:200px;
  padding:8px 10px;
  border:2px solid rgba(59,130,246,0.3);
  border-radius:8px;
  font-family:inherit;
  font-size:0.9rem;
  margin:0 4px;
  transition:all .25s ease;
  background:#fff;
  cursor:pointer;
}

select.blank-input:focus {
  outline:none;
  border-color:var(--blue);
  box-shadow:0 0 0 3px rgba(59,130,246,0.15);
}

select.blank-input.correct {
  border-color:var(--success);
  background:var(--success-bg);
}

select.blank-input.incorrect {
  border-color:var(--error);
  background:var(--error-bg);
}

/* Checklist items */
.feature-list {
  display:grid;
  gap:10px;
  margin-top:12px;
}

.feature-item {
  background:#fff;
  border:2px solid rgba(59,130,246,0.15);
  border-radius:10px;
  padding:10px 14px;
  font-size:0.9rem;
  display:flex;
  align-items:center;
  gap:10px;
  cursor:pointer;
  transition:all .25s ease;
}

.feature-item:hover {
  border-color:var(--blue);
  transform:translateX(3px);
}

.feature-item input[type="checkbox"] {
  width:20px;
  height:20px;
  accent-color:var(--green);
  cursor:pointer;
}

.feature-item.checked {
  background:var(--success-bg);
  border-color:var(--success);
  color:#065f46;
  font-weight:600;
}

.feature-item.error-highlight {
  background:var(--error-bg);
  border-color:var(--error);
}

/* Extended practice pill button */
.practice-pill {
  display:inline-flex;
  align-items:center;
  gap:10px;
  background:linear-gradient(135deg,var(--pink),var(--accent));
  color:#fff;
  padding:12px 20px;
  border-radius:999px;
  font-weight:700;
  font-size:0.92rem;
  cursor:pointer;
  transition:all .3s ease;
  border:none;
  box-shadow:0 6px 20px rgba(236,72,153,0.3);
  margin-top:16px;
}

.practice-pill:hover {
  transform:translateY(-3px);
  box-shadow:0 8px 24px rgba(236,72,153,0.4);
}

.practice-pill .icon {
  font-size:1.2rem;
}

@media(max-width:768px){
  .app{
    padding:10px;
  }

  .topbar{
    flex-direction:column;
    align-items:flex-start;
    gap:8px;
  }

  .quicknav{
    display:none;
  }

  .page-inner{
    padding:16px;
  }

  .btn{
    font-size:0.88rem;
    padding:9px 14px;
  }

  .footer{
    flex-direction:column;
    align-items:stretch;
    gap:8px;
  }

  .nav-buttons{
    width:100%;
    justify-content:space-between;
  }

  .progress{
    width:100%;
    justify-content:center;
  }

  .dotbar{
    flex-wrap:wrap;
    justify-content:center;
  }

  .category-buttons {
    flex-direction:column;
  }
}
</style>
</head>
<body>
<div class="bg" aria-hidden="true"></div>

<div class="app" role="application" aria-label="Citation Skills Guide">
  <!-- top bar -->
  <div class="topbar">
    <div class="brand">
      <div class="brand-badge" aria-hidden="true"></div>
      <span>Citation Skills Guide</span>
    </div>
    <div class="quicknav" role="navigation" aria-label="Quick jump">
      <button class="qn" data-go="home">Home</button>
      <button class="qn" data-go="overview">Overview</button>
      <button class="qn" data-go="outcomes">Learning Goals</button>
      <button class="qn" data-go="step1">Step 1</button>
      <button class="qn" data-go="step2">Step 2</button>
      <button class="qn" data-go="step3">Step 3</button>
      <button class="qn" data-go="step4">Step 4</button>
      <button class="qn" data-go="step5">Step 5</button>
      <button class="qn" data-go="extra">Bonus</button>
      <button class="qn" data-go="reference">Reference</button>
    </div>
  </div>

  <!-- viewport -->
  <div class="viewport" id="viewport" tabindex="0">
    <!-- COVER -->
    <section class="page visible" data-page="home">
      <div class="page-inner">
        <div class="hero">
          <span class="badge">GCEN306A ‚Äß VE3B & VE3BN ‚Äß Workplace Correspondence III</span>
          <h1>Guide to Citing Sources <br>in Workplace Emails</h1>
          <p class="lead">Learn to show where your information comes from in workplace emails</p>
          <div class="cta">
            <button class="btn primary" data-next>Start Learning</button>
          </div>
        </div>

        <div class="grid grid-2">
          <div class="block">
            <span class="kicker">Why citation matters</span>
            <h3>Build trust with your readers</h3>
            <ul>
              <li>Show where your facts come from</li>
              <li>Make your emails sound professional</li>
              <li>Develop skills for academic and workpalce success </li>
            </ul>
          </div>
          <div class="block">
            <span class="kicker">Five steps</span>
            <h3>What you'll learn</h3>
            <ul>
              <li>Recognise how professionals cite sources</li>
              <li>Collect useful citation phrases you can reuse</li>
              <li>Report survey data with percentages</li>
              <li>Paraphrase customer feedback professionally</li>
              <li>Proofread and fix citation errors</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- OVERVIEW -->
    <section class="page" data-page="overview">
      <div class="page-inner">
        <span class="kicker">Overview</span>
        <h2>About this guide</h2>
        <p>This guide teaches you how to cite sources in workplace emails ‚Äì showing readers where your facts and data come from.</p>

        <div class="block">
          <span class="kicker">Understanding Citation</span>
          <h3>What does "citation" mean in this guide?</h3>
          <p>In this guide,<strong> citation</strong> means <strong>telling your readers where information comes from</strong>.</p>
          <p><strong>Examples:<br></strong><em>"According to the customer survey (Oct 2025), three-quarters (75%) of respondents were unhappy with..."<br><br>"Comments on the customer forum show that‚Ä¶"</em></p>
          <p>This shows you got the information from a survey and the forum, not just your own opinion.</p>
        </div>

        <div class="block">
          <h3>This kind of simple citation is very common in workplace emails and reports because it</h3>
          <ul>
            <li>makes your message <strong>believable</strong> and <strong>professional</strong></li>
            <li>shows that you are not just making claims  ‚Äì you have evidence to back them up</li>
            
          </ul>
        </div>

        <div class="callout tip">
          <h3>üî¥üü†üü¢ Note</h3>
          <p>In higher diploma or university, you may also need <strong>academic citation styles</strong> (e.g. APA or Harvard). These use brackets and reference lists, but the main idea is the same: you must show clearly whose ideas, words or data you are using.</p>
        </div>
      </div>
    </section>

    <!-- LEARNING GOALS -->
    <section class="page" data-page="outcomes">
      <div class="page-inner">
        <span class="kicker">Learning Goals</span>
        <h2>What you'll be able to do</h2>
        <p>After finishing this guide, you can write workplace emails that clearly show where information comes from.</p>

        <div class="block">
          <h3>Skills you will develop</h3>
          <ul class="checklist">
            <li>Find citation words in emails</li>
            <li>Name your sources, e.g. survey, forum, report</li>
            <li>Write percentages correctly</li>
            <li>Connect suggestions to data</li>
            <li>Check your own writing for citation errors</li>
          </ul>
        </div>

        <div class="block">
          <h3>Step-by-step learning</h3>
          <div class="data-table">
            <div class="data-row">
              <span class="data-issue">Step 1: Notice</span>
              <span class="data-percent">See examples</span>
            </div>
            <div class="data-row">
              <span class="data-issue">Step 2: Collect</span>
              <span class="data-percent">Gather phrases</span>
            </div>
            <div class="data-row">
              <span class="data-issue">Step 3: Build</span>
              <span class="data-percent">Write sentences</span>
            </div>
            <div class="data-row">
              <span class="data-issue">Step 4: Apply</span>
              <span class="data-percent">Use with forums</span>
            </div>
            <div class="data-row">
              <span class="data-issue">Step 5: Proofread</span>
              <span class="data-percent">Find & fix errors</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- STEP 1: SPOT THE CITATION LANGUAGE -->
    <section class="page" data-page="step1">
      <div class="page-inner">
        <span class="kicker">Step 1: Notice</span>
        <h2>Spot the citation language</h2>
        
        <div class="block">
          <div class="task-icon">üëÄ</div>
          <h3>Compare two emails</h3>
          <p>Both email excerpts discuss survey results. One cites sources clearly; the other doesn't.</p>
        </div>

        <div class="grid grid-2">
          <div class="block">
            <h4 style="color:var(--error); margin-top:0;">‚ùå Email A: No clear citation</h4>
            <div class="email-sample no-cite">
              <p>Dear Isabella</p>
              <p>I have gathered some information about the issues customers faced during our tours.  Many customers were unhappy with our tour guides. They thought the guides were unprofessioanl and rude.</p>
              <p>Also, customers had problems finding the pick-up location.  Some drivers did not have their contact information.</p>
            </div>
          </div>
          
          <div class="block">
            <h4 style="color:var(--success); margin-top:0;">‚úÖ Email B: Clear citation</h4>
            <div class="email-sample with-cite">
              <p>Dear Isabella</p>
              <p><span class="cite-highlight">According to the customer satisfaction survey conducted in October 2025</span>, <span class="cite-highlight">three-quarters (75%) of the respondents</span> were dissatisfied with our tour guides. They felt the guides were unprofessional and rude.</p>
              <p>Furthermore, <span class="cite-highlight">comments from the online customer forum show that</span> some customers could not find the pick-up location because drivers did not have their contact information.</p>
            </div>
          </div>
        </div>

        <div class="block">
          <h3>What makes Email B better?</h3>
          <p>Email B is <strong>more professional and convincing</strong> because it:</p>
          <ul>
            <li><strong>names the source of information</strong> (survey, forum)</li>
            <li><strong>gives specific numbers</strong>(three-quarters (75%))</li>
            <li><strong>states when data was collected </strong> (October 2025)</li>
            <li><strong>makes it clear these are customer opinions</strong>, not just the writer's guesses or claims</li>
          </ul>
        </div>

        <div class="block">
          <h3>‚úèÔ∏è Practice: Find citation features</h3>
          <p class="small">Read the following email except about staff feedback. <strong>Tick ONLY the features you see</strong> in the email:</p>
          
          <div class="email-sample with-cite" style="margin-bottom:16px;">
            <p>Dear Simon</p>
            <p><span class="cite-highlight">Based on the staff satisfaction survey conducted in December 2025</span>, <span class="cite-highlight">four out of five employees (80%)</span> said they need better training. <span class="cite-highlight">Feedback from the staff forum</span> also shows many feel unsupported during busy times.</p>
          </div>
          
          <div class="feature-list" id="featureList">
            <label class="feature-item">
              <input type="checkbox" value="source" data-correct="true">
              <span>Names the source (survey/forum)</span>
            </label>
            <label class="feature-item">
              <input type="checkbox" value="numbers" data-correct="true">
              <span>Includes numbers (80%, four out of five)</span>
            </label>
            <label class="feature-item">
              <input type="checkbox" value="date" data-correct="true">
              <span>States when data was collected (December 2025)</span>
            </label>
            <label class="feature-item">
              <input type="checkbox" value="vague" data-correct="false">
              <span>Uses vague words like "some people said"</span>
            </label>
            <label class="feature-item">
              <input type="checkbox" value="link" data-correct="true">
              <span>Links data to people's opinions</span>
            </label>
            <label class="feature-item">
              <input type="checkbox" value="personal" data-correct="false">
              <span>Uses "I think" or "I believe"</span>
            </label>
          </div>

          <button class="btn primary" id="checkFeatures" style="margin-top:16px;">Check My Answers</button>
          <div class="feedback" id="featureFeedback"></div>
        </div>

        <div class="callout tip">
          <h3>üí° Remember</h3>
          <ul>
            <li><strong>Always name your source</strong> (survey, forum, report)</li>
            <li><strong>Give specific numbers</strong> (e.g., percentges, amounts, totals)</li>
            <li><strong>State when data was collected</strong> </li>
            <li><strong>Avoid vague words</strong> like "many people" without saying who</li>
          </ul>
        </div>

        <button class="practice-pill"           
               onclick="window.open('s1-spotting-citation-features.html','_blank')"
           type="button">
          <span class="icon">üéØ</span>
          <span>Try Extended Practice</span>
        </button>
      </div>
    </section>

    <!-- STEP 2: COLLECT CITATION CHUNKS -->
    <section class="page" data-page="step2">
      <div class="page-inner">
        <span class="kicker">Step 2: Collect</span>
        <h2>Useful citation phrases</h2>
        
        <div class="block">
          <div class="task-icon">üìö</div>
          <h3>Citation language patterns</h3>
          <p>Here are useful phrases you can use to cite survey data and forum comments in your emails. These are called "citation chunks" ‚Äì ready-made patterns you can adapt.</p>
        </div>

        <div class="block">
          <h3>Two types of phrases</h3>
          <p><strong>Survey phrases</strong> = used when reporting numbers and percentages</p>
          <p><strong>Example:</strong> <br><em>"According to the survey, around two-thirds (66%) of the customers..."</em></p>
          <hr class="sep">
          <p><strong>Feedback phrases</strong> = used when describing what people said</p>
          <p><strong>Example:</strong> <br><em>"Comments from the feedback form show that customers complained about</em>..."</p>
        </div>

        <div class="block">
          <h3>Survey phrases (for numbers)</h3>
          <div class="chip-grid">
            <div class="chip">According to the <strong>survey</strong>...</div>
            <div class="chip">The survey <strong>conducted in Oct 2025</strong> shows...</div>
            <div class="chip"><strong>Three-quarters (75%)</strong> of the respondents...</div>
            <div class="chip"><strong>Around two-thirds (66%)</strong> of the respondents...</div>
            <div class="chip">The survey results <strong>indicate</strong> that...</div>
            <div class="chip"><strong>Based on</strong> the survey...</div>
          </div>
        </div>

        <div class="block">
          <h3>Feedback phrases (for comments)</h3>
           <div class="chip-grid">
    <div class="chip"><strong>Comments from</strong> the online forum...</div>
    <div class="chip"><strong>Feedback from</strong> the feedback form shows...</div>
    <div class="chip">One customer <strong>complained that</strong>...</div>
    <div class="chip">Several customers <strong>mentioned that</strong>...</div>
    <div class="chip"><strong>According to feedback forms</strong>...</div>
  </div>
</div>

        <div class="block">
          <h3>Practice: Sort the phrases into buckets</h3>
          <p class="small"><strong>Instructions:</strong><br>
          1. Tap a phrase chip to select it (turns orange)<br>
          2. Tap the correct category button (Survey or Feedback)<br>
          3. The chip will move into the right bucket<br>
          4. Repeat until all are sorted</p>
          
          <div style="margin-top:16px;">
            <div class="chip-grid" id="sortChips">
              <div class="chip" data-type="forum" data-answered="false">One customer mentioned the service was slow...</div>
              <div class="chip" data-type="survey" data-answered="false">The survey shows that four out of five...</div>
              <div class="chip" data-type="forum" data-answered="false">Feedback on the forum indicates that...</div>
              <div class="chip" data-type="survey" data-answered="false">Based on the survey, around two-thirds...</div>
              <div class="chip" data-type="forum" data-answered="false">Comments from the feedback form show frustration...</div>
              <div class="chip" data-type="survey" data-answered="false">According to the survey (Nov 2025)...</div>
            </div>
          </div>

          <div class="category-buttons">
            <button class="category-btn survey" id="btnSurvey">
              <span>üìä</span>
              <span>Survey</span>
            </button>
            <button class="category-btn forum" id="btnForum">
              <span>üí¨</span>
              <span>Feedback</span>
            </button>
          </div>

          <div class="bucket-container">
            <div class="bucket survey-bucket">
              <h4><span>üìä</span> Survey phrases</h4>
              <div class="bucket-items" id="surveyBucket">
                <p class="small" style="margin:0; color:var(--muted);">Sorted phrases will appear here...</p>
              </div>
            </div>
            <div class="bucket forum-bucket">
              <h4><span>üí¨</span> Feedback phrases</h4>
              <div class="bucket-items" id="forumBucket">
                <p class="small" style="margin:0; color:var(--muted);">Sorted phrases will appear here...</p>
              </div>
            </div>
          </div>

          <div class="feedback info" id="sortHint" style="display:block; margin-top:12px;">
            üëÜ Tap a phrase above, then tap Survey or Feedback button
          </div>

          <button class="btn primary" id="checkSort" style="margin-top:16px; display:none;" disabled>Check My Answers</button>
          <div class="feedback" id="sortFeedback"></div>
        </div>

        <div class="callout tip">
          <h3>üí° How to use</h3>
          <ul>
            <li><strong>Survey phrases</strong> ‚Üí use with data and percentages</li>
            <li><strong>Feedback phrases</strong> ‚Üí use when describing what people said</li>
            <li>You can <strong>mix both</strong> in one email</li>
            <li>Keep your own list of favourite phrases</li>
          </ul>
        </div>

        <button class="practice-pill" 
               onclick="window.open('s2-collecting-citation-phrases.html','_blank')"
           type="button">
           <span class="icon">üéØ</span>
          <span>Try Extended Practice</span>
        </button>
      </div>
    </section>

    <!-- STEP 3: BUILD CITED SENTENCES -->
    <section class="page" data-page="step3">
      <div class="page-inner">
        <span class="kicker">Step 3: Build</span>
        <h2>Write sentences with data</h2>
        
        <div class="block">
          <div class="task-icon">üî®</div>
          <h3>Demonstration: Building cited sentences</h3>
          <p>Now you'll combine <strong>citation phrases</strong> with <strong>survey data</strong> to make professional sentences.</p>
        </div>

        <div class="block">
          <h3>Express Tours survey data</h3>
          <p class="small">Key findings from the customer survey (October 2025):</p>
          
          <div class="data-table">
            <div class="data-row">
              <span class="data-issue">Unprofessional tour guides</span>
              <span class="data-percent">75%</span>
            </div>
            <div class="data-row">
              <span class="data-issue">Poor hotel service</span>
              <span class="data-percent">90%</span>
            </div>
            <div class="data-row">
              <span class="data-issue">Unclear pick-up instructions</span>
              <span class="data-percent">80%</span>
            </div>
          </div>
        </div>

        <div class="block">
          <h3>Explanation: The citation formula</h3>
          <p>Follow this pattern:</p>
          <div class="callout" style="border-left-color:var(--green); background:linear-gradient(135deg,var(--green-light),#f0fdf4);">
            <p style="margin:0; font-size:0.95rem; line-height:1.8;">
              <strong style="color:var(--green);">[Citation phrase]</strong> + 
              <strong style="color:var(--accent);">[Number in words + (%)]</strong> + 
              <strong style="color:var(--blue);">[Issue]</strong>
            </p>
          </div>
          
          <p style="margin-top:12px;"><strong>Example:</strong></p>
          <div class="email-sample">
            <span style="color:var(--green); font-weight:600;">According to the customer survey (Oct 2025),</span>
            <span style="color:var(--accent); font-weight:600;">three-quarters (75%) of the respondents</span>
            <span style="color:var(--blue); font-weight:600;">were dissatisfied with tour guides.</span>
          </div>
          
          <div class="callout" style="margin-top:12px; border-left-color:var(--pink);">
            <p style="margin:0;"><strong style="color:var(--pink);">How to express percentages:</strong></p>
            <ul style="margin-top:8px; margin-bottom:0;">
              <li>75% = <strong>three-quarters</strong></li>
              <li>80% = <strong>four out of five</strong></li>
              <li>85% = <strong>slightly more than four-fifths</strong></li>
              <li>90% = <strong>nine out of ten</strong></li>
              <li>70% = <strong>seven out of ten</strong></li>
              <li>66% = <strong>around two-thirds</strong></li>
            </ul>
          </div>
        </div>

        <div class="block">
          <h3>Practice: Complete sentences (New scenario)</h3>
          <p class="small">A hotel did a guest survey in December 2025. Use the data below:</p>
          
          <div class="data-table" style="margin-bottom:16px;">
            <div class="data-row">
              <span class="data-issue">Slow Wi-Fi</span>
              <span class="data-percent">85%</span>
            </div>
            <div class="data-row">
              <span class="data-issue">Room cleanliness</span>
              <span class="data-percent">70%</span>
            </div>
            <div class="data-row">
              <span class="data-issue">Breakfast quality</span>
              <span class="data-percent">60%</span>
            </div>
          </div>
          
          <div style="margin-top:16px; line-height:2.8;">
            <p><strong>Q1:</strong> According to the guest survey (Dec 2025), 
            <select id="blank1Step3" class="blank-input">
              <option value="">-- select --</option>
              <option value="70">seven out of ten (70%)</option>
              <option value="60">three out of five (60%)</option>
              <option value="85">slightly more than four-fifths (85%)</option>
            </select>
            of our guests were unhappy with Wi-Fi.</p>

            <p><strong>Q2:</strong> The survey shows that 
            <select id="blank2Step3" class="blank-input">
              <option value="">-- select --</option>
              <option value="breakfast">breakfast quality</option>
              <option value="clean">room cleanliness</option>
              <option value="wifi">slow Wi-Fi</option>
            </select>
            was a problem, with seven out of ten (70%) reporting dissatisfaction.</p>

            <p><strong>Q3:</strong> Based on the survey, 
            <select id="blank3Step3" class="blank-input">
              <option value="">-- select --</option>
              <option value="85">slightly more than four-fifths (85%)</option>
              <option value="3out5">three out of five (60%)</option>
              <option value="7out10">seven out of ten (70%)</option>
            </select>
            of our guests felt breakfast quality was poor.</p>
          </div>

          <button class="btn primary" id="checkBlanksStep3" style="margin-top:16px;">Check My Answers</button>
          <div class="feedback" id="blanksStep3Feedback"></div>
        </div>

        <div class="callout tip">
          <h3>‚úçÔ∏è Writing percentages</h3>
          <ul>
            <li><strong>Always write in words first:</strong> "three-quarters (75%)"</li>
            <li><strong>For numbers like 85%, 66%:</strong> use "slightly more than four-fifths" or "around two-thirds"</li>
            <li><strong>Link to source:</strong> "75% <u>of the respondents in the survey</u>"</li>
          </ul>
        </div>

        <button class="practice-pill"            
onclick="window.open('s3-writing-citation-sentences.html','_blank')"
           type="button">
          <span class="icon">üéØ</span>
          <span>Try Extended Practice</span>
        </button>
      </div>
    </section>

    <!-- STEP 4: CITE FORUM COMMENTS -->
    <section class="page" data-page="step4">
      <div class="page-inner">
        <span class="kicker">Step 4: Apply</span>
        <h2>Cite forum comments</h2>
        
        <div class="block">
          <div class="task-icon">üí¨</div>
          <h3>Demonstration: Citing customer comments</h3>
          <p>Forum comments give <strong>examples and stories</strong>. Here's how to cite them properly.</p>
        </div>

        <div class="block">
          <h3>Sample forum posts</h3>
          <p class="small">Customer posts from Express Tours forum:</p>
          
          <div class="email-sample" style="background:#fffbeb; border-color:rgba(251,191,36,0.3);">
            <p><strong>John Ng (15 Oct):</strong> "I couldn't find the pick-up point because the driver didn't have my phone number. I waited 45 minutes!"</p>
            <p><strong>William Lee (18 Oct):</strong> "The tour guide was rude to elderly customers. He rushed us and didn't answer questions."</p>
            <p><strong>Sarah Chan (20 Oct):</strong> "Hotel staff were unhelpful. They couldn't speak English well."</p>
          </div>
        </div>

        <div class="block">
          <h3>Explanation: How to cite comments</h3>
          <p>When citing forum comments:</p>
          <ul>
            <li><strong>Introduce the source:</strong> "Comments from the forum show that..."</li>
            <li><strong>Paraphrase</strong> (rewrite) instead of copying</li>
            <li><strong>Focus on main issue</strong>, not every detail</li>
            <li>Use "one customer", "several customers", etc. (no need to name them)</li>
          </ul>

          <p style="margin-top:12px;"><strong>Example:</strong></p>
          <div class="grid grid-2">
            <div class="email-sample no-cite">
              <p style="font-size:0.85rem;"><strong>Original:</strong> "I couldn't find the pick-up point because the driver didn't have my number..."</p>
            </div>
            <div class="email-sample with-cite">
              <p style="font-size:0.85rem;"><strong>Cited paraphrase:</strong> "<span class="cite-highlight">Comments from the forum show that</span> some customers couldn't find pick-up points due to missing contact details."</p>
            </div>
          </div>
        </div>

        <div class="block">
          <h3>Practice: Choose best paraphrase</h3>
          <p class="small">A gym received this forum comment:</p>
          
          <div class="email-sample" style="background:#fffbeb; border-color:rgba(251,191,36,0.3); margin-bottom:16px;">
            <p><strong>Lisa Wong (5 Dec):</strong> "Equipment is always broken. Nobody fixes it. I reported the treadmill three times but nothing happened for two weeks!"</p>
          </div>

          <p class="small"><strong>Which sentence best cites this comment?</strong></p>

          <div class="quiz-options">
            <label>
              <input type="radio" name="forumQ1" value="C">
              <span>I think the gym should fix equipment faster because customers are complaining.</span>
            </label>
            <label>
              <input type="radio" name="forumQ1" value="A">
              <span>Comments from the forum show that gym equipment is frequently broken and repairs take too long.</span>
            </label>
            <label>
              <input type="radio" name="forumQ1" value="B">
              <span>Lisa Wong said equipment is always broken and nobody fixes it quickly.</span>
            </label>
          </div>

          <button class="btn primary" id="checkForumQ1" style="margin-top:16px;">Check My Answer</button>
          <div class="feedback" id="forumQ1Feedback"></div>
        </div>

        <div class="block">
          <h3>Practice: Match comments to paraphrases</h3>
          <p class="small"><strong>Instructions:</strong><br>
          1. Tap one review on the LEFT<br>
          2. Then tap its matching paraphrase on the RIGHT<br>
          3. Both will turn yellow to show they're paired<br>
          4. Repeat for all three pairs</p>
          
          <div class="match-container" id="forumMatch">
            <div class="match-col">
              <h4>Original reviews</h4>
              <div class="match-item" data-comment="A" data-pair="">
                <strong>A:</strong> "Waiter forgot our order twice. We waited 50 minutes!"
              </div>
              <div class="match-item" data-comment="B" data-pair="">
                <strong>B:</strong> "Restaurant was too noisy. Too many tables crammed together."
              </div>
              <div class="match-item" data-comment="C" data-pair="">
                <strong>C:</strong> "Portions were tiny. I paid $200 but left hungry."
              </div>
            </div>
            <div class="match-col">
              <h4>Paraphrases</h4>
              <div class="match-item" data-paraphrase="B" data-pair="">
                Several customers mentioned the restaurant was too noisy.
              </div>
              <div class="match-item" data-paraphrase="C" data-pair="">
                Feedback shows portion sizes are too small for the prices.
              </div>
              <div class="match-item" data-paraphrase="A" data-pair="">
                Comments show service was slow and orders were forgotten.
              </div>
            </div>
          </div>

          <button class="btn primary" id="checkForumMatch" style="margin-top:16px; display:none;">Check My Matches</button>
          <div class="feedback" id="forumMatchFeedback"></div>
        </div>

        <div class="callout tip">
          <h3>‚úçÔ∏è Forum citation tips</h3>
          <ul>
            <li><strong>Don't copy exactly</strong> ‚Äì use your own words</li>
            <li><strong>Don't name customers</strong> in your email</li>
            <li><strong>Focus on facts</strong>, not emotions</li>
            <li>Use "Several customers mentioned..." if many say the same thing</li>
          </ul>
        </div>

        <button class="practice-pill"           
onclick="window.open('s4-linking-citation-to-recommendations.html','_blank')"
          type="button">
          <span class="icon">üéØ</span>
          <span>Try Extended Practice</span>
        </button>
      </div>
    </section>

    <!-- STEP 5: PROOFREAD EMAIL - INLINE EDITING -->
    <section class="page" data-page="step5">
      <div class="page-inner">
        <span class="kicker">Step 5: Proofread</span>
        <h2>Fix citation errors in email</h2>
        
        <div class="block">
          <div class="task-icon">‚úçÔ∏è</div>
          <h3>Demonstration: Finding citation errors</h3>
          <p>A trainee wrote this email about a bookshop survey. It has <strong>5 citation problems</strong> (underlined in red). Your job is to click each error and fix it.</p>
        </div>

        <div class="block">
          <h3>Explanation: Common mistakes</h3>
          <p>When checking emails, look for:</p>
          <ul>
            <li><strong>Missing sources:</strong> Numbers with no mention of survey/forum</li>
            <li><strong>Vague words:</strong> "Many people said..." without naming the source</li>
            <li><strong>No date:</strong> Not saying when data was collected</li>
            <li><strong>Personal opinions</strong> ("I think...") mixed with facts</li>
          </ul>
        </div>

        <div class="block">
          <h3>Practice: Click to fix errors</h3>
          <p class="small"><strong>How to do this:</strong> Click each underlined error. A menu will appear with correct options. Select the right fix. When all 5 are fixed, the "Check All" button appears.</p>
          
          <div class="email-sample editable">
            <p>Dear Manager</p>
            <p>I am writing about customer feedback from our bookshop.</p>
            <p><span class="editable-text" data-error="1" data-fix="According to the customer satisfaction survey (Nov 2025), around two-thirds (65%)">Around two-thirds (65%)</span> of the customers were unhappy with our opening hours.</p>
            <p><span class="editable-text" data-error="2" data-fix="Comments from the online customer forum show that">Many people complained that</span> the shop is too small and crowded.</p>
            <p><span class="editable-text" data-error="3" data-fix="As around two-thirds (65%) of respondents were dissatisfied with opening hours, I suggest that we">I think we should</span> extend opening hours to 9pm on weekdays.</p>
            <p><span class="editable-text" data-error="4" data-fix="Feedback from the forum also shows that customers">Customers also mentioned that staff</span> were not helpful when asking for book recommendations.</p>
            <p><span class="editable-text" data-error="5" data-fix="The recommendations made based on these findings">I strongly think these findings</span> will help improve our services.</p>
          </div>

          <div id="fixMenu" style="display:none; position:fixed; background:#fff; border:2px solid var(--blue); border-radius:12px; padding:12px; box-shadow:0 8px 24px rgba(0,0,0,0.2); z-index:1000; max-width:400px;">
            <h4 style="margin:0 0 10px; font-size:0.9rem; color:var(--blue);">Choose the correct fix:</h4>
            <div id="fixOptions" style="display:grid; gap:8px;"></div>
          </div>

          <button class="btn primary" id="checkAllFixes" style="margin-top:16px; display:none;">Check All Fixes</button>
          <div class="feedback" id="proofreadFeedback"></div>
        </div>

        <div class="callout tip">
          <h3>‚úçÔ∏è Proofreading checklist</h3>
          <p>When checking your own emails:</p>
          <ul>
            <li>‚úÖ Every number has a source (survey, report, etc.)</li>
            <li>‚úÖ You stated when data was collected</li>
            <li>‚úÖ Forum comments have citation phrases</li>
            <li>‚úÖ Suggestions link to data ("Because...")</li>
            <li>‚úÖ No vague words ("many people") without sources</li>
          </ul>
        </div>
        <button class="practice-pill" 
onclick="window.open('s5-proofreading-citations.html','_blank')"
                type="button">
          <span class="icon">üéØ</span>
          <span>Try Extended Practice</span>
        </button>
      </div>
    </section>

    <!-- EXTRA: OTHER SOURCES -->
    <section class="page" data-page="extra">
      <div class="page-inner">
        <span class="kicker">Bonus ‚Äì Optional</span>
        <h2>Other types of sources</h2>
        <p>So far you've practised citing <strong>surveys</strong> and <strong>forums</strong>. But you might also need to cite websites, articles, books, or reports.</p>

        <div class="callout">
          <h3>üí° Same idea, different sources</h3>
          <p>The main rule stays the same: <strong>tell readers where information comes from</strong>.</p>
        </div>

        <div class="block">
          <h3>Citing different sources in workplace emails</h3>
          <table class="comparison-table">
            <thead>
              <tr>
                <th>Source type</th>
                <th>How to cite in emails</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Website</td>
                <td>According to the company website (www.example.com), customers can...</td>
              </tr>
              <tr>
                <td>News article</td>
                <td>A recent article in the South China Morning Post (15 Dec 2025) reported that...</td>
              </tr>
              <tr>
                <td>Book</td>
                <td>In "Customer Service Excellence" by Chan (2023), the author suggests...</td>
              </tr>
              <tr>
                <td>Company report</td>
                <td>The Annual Report (2025) shows that sales increased by...</td>
              </tr>
              <tr>
                <td>Interview</td>
                <td>In an interview with the manager (10 Jan 2026), she mentioned...</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="block">
          <h3>Academic citation (for higher diploma/university)</h3>
          <p>If you continue studying, you'll use <strong>academic styles</strong> like APA or Harvard. These use brackets and reference lists.</p>
          
          <p style="margin-top:12px;"><strong>Same information, different formats:</strong></p>
          
          <table class="comparison-table">
            <thead>
              <tr>
                <th>Style</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Workplace email</td>
                <td>According to the customer survey (Oct 2025), three-quarters (75%) were dissatisfied...</td>
              </tr>
              <tr>
                <td>Academic (APA/Harvard)</td>
                <td>A customer survey found that 75% were dissatisfied with tour guides (Chan, 2025).</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="block">
          <h3>Practice: Match sources to citations</h3>
          <p class="small">Match each source (left) to its academic citation (right). Tap one from each side.</p>
          
          <div class="match-container" id="academicMatch">
            <div class="match-col">
              <h4>Source</h4>
              <div class="match-item" data-source="article" data-pair="">Article by Dr Chan in 2022</div>
              <div class="match-item" data-source="report" data-pair="">Company report from VTC in 2021</div>
              <div class="match-item" data-source="survey" data-pair="">Survey of 200 customers in 2023</div>
            </div>
            <div class="match-col">
              <h4>Academic citation</h4>
              <div class="match-item" data-citation="survey" data-pair="">(Customer survey, 2023)</div>
              <div class="match-item" data-citation="article" data-pair="">(Chan, 2022)</div>
              <div class="match-item" data-citation="report" data-pair="">(VTC, 2021)</div>
            </div>
          </div>

          <button class="btn primary" id="checkMatches" style="margin-top:16px; display:none;">Check My Answers</button>
          <div class="feedback" id="matchFeedback"></div>
        </div>

        <div class="block">
          <h3>Fill in the blanks</h3>
          <p>Complete these sentences using information from above.</p>
          
          <div style="margin-top:16px; line-height:2.2;">
            <p>1. A recent report by <input type="text" class="blank-input" id="blank1Extra" placeholder="organisation" style="min-width:80px;"> (<input type="text" class="blank-input" id="blank2Extra" placeholder="year" style="min-width:70px;">) shows that students like the programmes they offer.</p>
            
            <p>2. According to <input type="text" class="blank-input" id="blank3Extra" placeholder="surname" style="min-width:80px;"> (<input type="text" class="blank-input" id="blank4Extra" placeholder="year" style="min-width:70px;">), tour guide quality affects satisfaction.</p>
          </div>

          <button class="btn primary" id="checkBlanksExtra" style="margin-top:16px;">Check My Answers</button>
          <div class="feedback" id="blankFeedbackExtra"></div>
        </div>

        <div class="callout tip">
          <h3>‚úÖ Remember</h3>
          <p>For your <strong>Express Tours email</strong>, use simple citation phrases like "According to the survey..."</p>
          <p>Academic styles are for future reports and higher-level study.</p>
        </div>
    </section>

    <!-- REFERENCE PAGE: ACADEMIC CITATION STYLES -->
    <section class="page" data-page="reference">
      <div class="page-inner">
        <span class="kicker">Reference Guide</span>
        <h2>Academic Citation Styles</h2>
        <p>This page shows different academic citation styles you may need for higher diploma or university. Use this as a quick reference.</p>

        <div class="callout">
          <h3>üìñ How to use this page</h3>
          <p>Each style shows the <strong>structure</strong> (what order information goes in) followed by a coloured <strong>example</strong>.</p>
          <p><strong>Colours show:</strong> <span class="cite-author">Author</span>, <span class="cite-year">Year</span>, <span class="cite-title">Title</span>, <span class="cite-source">Source</span>, <span class="cite-pages">Pages</span></p>
        </div>

        <div class="block">
          <h3>1. APA Style (American Psychological Association)</h3>
          <p class="small">Common in: Psychology, Education, Social Sciences</p>
          
          <h4 style="font-size:0.95rem; margin-top:16px;">Structure: Book</h4>
          <p class="small" style="margin:0; padding:8px 12px; background:var(--blue-light); border-radius:8px;">
            Author surname, First initial. (Year). <em>Book title</em>. Publisher.
          </p>
          
          <div class="citation-example apa">
            <div class="citation-label">APA Example</div>
            <span class="cite-author">Smith, J. D.</span> (<span class="cite-year">2023</span>). <span class="cite-title">Customer service excellence: A practical guide</span>. <span class="cite-source">Pearson Education</span>.
          </div>

          <h4 style="font-size:0.95rem; margin-top:16px;">Structure: Journal Article</h4>
          <p class="small" style="margin:0; padding:8px 12px; background:var(--blue-light); border-radius:8px;">
            Author surname, First initial. (Year). Article title. <em>Journal Name</em>, Volume(Issue), page-page.
          </p>
          
          <div class="citation-example apa">
            <div class="citation-label">APA Example</div>
            <span class="cite-author">Chan, M. L.</span> (<span class="cite-year">2024</span>). The impact of tour guide behaviour on customer satisfaction. <span class="cite-title"><em>Tourism Management Journal</em></span>, <span class="cite-source">45(3)</span>, <span class="cite-pages">78-92</span>.
          </div>

          <h4 style="font-size:0.95rem; margin-top:16px;">In-text Citation</h4>
          <div class="citation-example apa">
            <div class="citation-label">APA In-text</div>
            Research shows that customer satisfaction depends on staff behaviour (<span class="cite-author">Chan</span>, <span class="cite-year">2024</span>).
          </div>
        </div>

        <div class="block">
          <h3>2. Harvard Style</h3>
          <p class="small">Common in: Business, Economics, Natural Sciences</p>
          
          <h4 style="font-size:0.95rem; margin-top:16px;">Structure: Book</h4>
<p class="small" style="margin:0; padding:8px 12px; background:var(--blue-light); border-radius:8px;">
            Author surname, First initial(s). (Year) <em>Book title</em>. City: Publisher.
          </p>
          
          <div class="citation-example harvard">
            <div class="citation-label">Harvard Example</div>
            <span class="cite-author">Wong, K.H.</span> (<span class="cite-year">2023</span>) <span class="cite-title"><em>Workplace communication skills</em></span>. <span class="cite-source">Hong Kong: VTC Press</span>.
          </div>

          <h4 style="font-size:0.95rem; margin-top:16px;">Structure: Website</h4>
          <p class="small" style="margin:0; padding:8px 12px; background:var(--blue-light); border-radius:8px;">
            Author/Organisation (Year) <em>Page title</em>. Available at: URL (Accessed: date).
          </p>
          
          <div class="citation-example harvard">
            <div class="citation-label">Harvard Example</div>
            <span class="cite-author">VTC</span> (<span class="cite-year">2024</span>) <span class="cite-title"><em>Student handbook</em></span>. Available at: <span class="cite-source">www.vtc.edu.hk/handbook</span> (Accessed: <span class="cite-year">29 December 2025</span>).
          </div>

          <h4 style="font-size:0.95rem; margin-top:16px;">In-text Citation</h4>
          <div class="citation-example harvard">
            <div class="citation-label">Harvard In-text</div>
            Effective communication requires clear citation practices (<span class="cite-author">Wong</span> <span class="cite-year">2023</span>).
          </div>
        </div>

        <div class="block">
          <h3>3. MLA Style (Modern Language Association)</h3>
          <p class="small">Common in: Humanities, English, Literature</p>
          
          <h4 style="font-size:0.95rem; margin-top:16px;">Structure: Book</h4>
          <p class="small" style="margin:0; padding:8px 12px; background:var(--blue-light); border-radius:8px;">
            Author surname, First name. <em>Book Title</em>. Publisher, Year.
          </p>
          
          <div class="citation-example mla">
            <div class="citation-label">MLA Example</div>
            <span class="cite-author">Lee, Sarah</span>. <span class="cite-title"><em>Professional Email Writing</em></span>. <span class="cite-source">Oxford University Press</span>, <span class="cite-year">2024</span>.
          </div>

          <h4 style="font-size:0.95rem; margin-top:16px;">Structure: Online Article</h4>
          <p class="small" style="margin:0; padding:8px 12px; background:var(--blue-light); border-radius:8px;">
            Author surname, First name. "Article Title." <em>Website Name</em>, Date, URL.
          </p>
          
          <div class="citation-example mla">
            <div class="citation-label">MLA Example</div>
            <span class="cite-author">Ng, David</span>. <span class="cite-title">"How to Cite Sources in Business Emails."</span> <span class="cite-source"><em>Business Writing Today</em></span>, <span class="cite-year">15 Nov. 2024</span>, www.businesswriting.com/citations.
          </div>

          <h4 style="font-size:0.95rem; margin-top:16px;">In-text Citation</h4>
          <div class="citation-example mla">
            <div class="citation-label">MLA In-text</div>
            Professional emails should always cite data sources (<span class="cite-author">Lee</span> <span class="cite-pages">45</span>).
          </div>
        </div>

        <div class="block">
          <h3>4. Chicago Style</h3>
          <p class="small">Common in: History, Arts, Publishing</p>
          
          <h4 style="font-size:0.95rem; margin-top:16px;">Structure: Book (Bibliography)</h4>
          <p class="small" style="margin:0; padding:8px 12px; background:var(--blue-light); border-radius:8px;">
            Author surname, First name. <em>Book Title</em>. Place: Publisher, Year.
          </p>
          
          <div class="citation-example chicago">
            <div class="citation-label">Chicago Example</div>
            <span class="cite-author">Tam, Michael</span>. <span class="cite-title"><em>Research Methods for Business Students</em></span>. <span class="cite-source">London: Routledge</span>, <span class="cite-year">2023</span>.
          </div>

          <h4 style="font-size:0.95rem; margin-top:16px;">Structure: Footnote (first citation)</h4>
          <p class="small" style="margin:0; padding:8px 12px; background:var(--blue-light); border-radius:8px;">
            First name Surname, <em>Book Title</em> (Place: Publisher, Year), page.
          </p>
          
          <div class="citation-example chicago">
            <div class="citation-label">Chicago Footnote</div>
            <sup>1</sup> <span class="cite-author">Michael Tam</span>, <span class="cite-title"><em>Research Methods for Business Students</em></span> (<span class="cite-source">London: Routledge</span>, <span class="cite-year">2023</span>), <span class="cite-pages">67</span>.
          </div>

          <h4 style="font-size:0.95rem; margin-top:16px;">Shortened footnote (subsequent citations)</h4>
          <div class="citation-example chicago">
            <div class="citation-label">Chicago Shortened</div>
            <sup>5</sup> <span class="cite-author">Tam</span>, <span class="cite-title"><em>Research Methods</em></span>, <span class="cite-pages">89</span>.
          </div>
        </div>

        <div class="block">
          <h3>Quick Comparison Table</h3>
          <table class="comparison-table">
            <thead>
              <tr>
                <th>Style</th>
                <th>In-text format</th>
                <th>Reference list order</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>APA</td>
                <td>(Author, Year)</td>
                <td>Alphabetical by surname</td>
              </tr>
              <tr>
                <td>Harvard</td>
                <td>(Author Year)</td>
                <td>Alphabetical by surname</td>
              </tr>
              <tr>
                <td>MLA</td>
                <td>(Author Page)</td>
                <td>Alphabetical by surname</td>
              </tr>
              <tr>
                <td>Chicago</td>
                <td>Superscript number<sup>1</sup></td>
                <td>Alphabetical (Bibliography) or Numbered (Notes)</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="callout tip">
          <h3>‚úÖ Key tips</h3>
          <ul>
            <li><strong>Always check</strong> which style your course requires</li>
            <li><strong>Be consistent</strong> ‚Äì use one style throughout</li>
            <li><strong>Use citation tools</strong> like Zotero or EndNote to help</li>
            <li><strong>For workplace emails</strong>, simple phrases like "According to..." are enough</li>
          </ul>
        </div>
      <button class="practice-pill"  
onclick="window.open('s6-academic-citation-skills.html','_blank')"
           type="button">
          <span class="icon">üéØ</span>
          <span>Try Extended Practice</span>
        </button>
      </div>
    </section>
  </div>

  <!-- footer nav -->
  <div class="footer">
    <div class="nav-buttons">
      <button class="btn small" data-home>Home</button>
      <button class="btn" data-prev>‚Üê Back</button>
      <button class="btn primary" id="footerNext" data-next>Next ‚Üí</button>
    </div>
    <div class="progress">
      <div class="dotbar" aria-hidden="true"></div>
      <span class="small" id="progressLabel">1 / 10</span>
    </div>
  </div>
</div>

<script>
const order = ['home', 'overview', 'outcomes', 'step1', 'step2', 'step3', 'step4', 'step5', 'extra', 'reference'];
const pages = [...document.querySelectorAll('.page')];
const dotsWrap = document.querySelector('.dotbar');
const progressLabel = document.getElementById('progressLabel');
const backBtn = document.querySelector('[data-prev]');
const nextBtn = document.getElementById('footerNext');

function fireConfetti() {
  confetti({
    particleCount: 120,
    spread: 80,
    origin: { y: 0.4 },
    colors: ['#ff8c00', '#3b82f6', '#10b981', '#fbbf24', '#ec4899']
  });
}

function show(id){
  pages.forEach(p=>p.classList.toggle('visible', p.dataset.page === id));
  document.querySelectorAll('.quicknav .qn').forEach(b=>{
    b.classList.toggle('active', b.dataset.go === id);
  });

  const idx = order.indexOf(id);
  progressLabel.textContent = (idx + 1) + ' / ' + order.length;

  dotsWrap.innerHTML = '';
  order.forEach((k, i) => {
    const d = document.createElement('div');
    d.className = 'dot' + (i === idx ? ' active' : '');
    d.title = k;
    d.addEventListener('click', () => show(k));
    dotsWrap.appendChild(d);
  });

  if (id === 'home') {
    backBtn.style.visibility = 'hidden';
    nextBtn.style.visibility = 'hidden';
  } else if (id === 'reference') {
    // Last page - hide next button
    backBtn.style.visibility = 'visible';
    nextBtn.style.visibility = 'hidden';
  } else {
    backBtn.style.visibility = 'visible';
    nextBtn.style.visibility = 'visible';
  }
  
  document.getElementById('viewport').focus({ preventScroll:true });
}

function currentId(){
  return pages.find(p=>p.classList.contains('visible'))?.dataset.page || order[0];
}

function go(delta){
  const idx=order.indexOf(currentId());
  const nextIdx=Math.min(Math.max(idx+delta,0),order.length-1);
  show(order[nextIdx]);
}

document.querySelectorAll('[data-next]').forEach(b=>b.addEventListener('click',()=>go(1)));
document.querySelectorAll('[data-prev]').forEach(b=>b.addEventListener('click',()=>go(-1)));
document.querySelectorAll('[data-home]').forEach(b=>b.addEventListener('click',()=>show('home')));
document.querySelectorAll('[data-go]').forEach(b=>b.addEventListener('click',e=>show(e.currentTarget.dataset.go)));

window.addEventListener('keydown',e=>{
  if(['ArrowRight','PageDown'].includes(e.key)) go(1);
  if(['ArrowLeft','PageUp'].includes(e.key)) go(-1);
  if(e.key==='Home') show('home');
});

// STEP 1: FEATURE CHECKLIST - RANDOMIZED ORDER, ONLY MARK TICKED ITEMS
document.getElementById('checkFeatures')?.addEventListener('click', function() {
  const items = document.querySelectorAll('.feature-item input[type="checkbox"]');
  
  const anyChecked = [...items].some(item => item.checked);
  
  if (!anyChecked) {
    const feedback = document.getElementById('featureFeedback');
    feedback.className = 'feedback info show';
    feedback.textContent = '‚ö†Ô∏è Please tick at least one feature first!';
    return;
  }
  
  let allCorrect = true;
  let errorCount = 0;
  
  items.forEach(item => {
    const parent = item.closest('.feature-item');
    const isChecked = item.checked;
    const shouldBeChecked = item.dataset.correct === 'true';
    
    parent.classList.remove('checked', 'error-highlight');
    
    if (isChecked) {
      if (shouldBeChecked) {
        parent.classList.add('checked');
      } else {
        parent.classList.add('error-highlight');
        allCorrect = false;
        errorCount++;
      }
    } else {
      // Don't mark unticked items
    }
  });
  
  const feedback = document.getElementById('featureFeedback');
  if (allCorrect && [...items].filter(i => i.checked && i.dataset.correct === 'true').length === 4) {
    feedback.className = 'feedback good show';
    feedback.textContent = 'üéâ Perfect! You found all 4 correct features: names source, includes numbers, states date, links to opinions.';
    fireConfetti();
    this.disabled = true;
  } else {
    feedback.className = 'feedback bad show';
    if (errorCount > 0) {
      feedback.textContent = `‚ùå ${errorCount} wrong choice(s). Red items should NOT be ticked. Review the email again!`;
    } else {
      feedback.textContent = '‚ùå You missed some correct features. Look for: source name, numbers, date, opinion links.';
    }
  }
});

// STEP 2: BUCKET SORTING WITH VISUAL FEEDBACK
let selectedChip = null;
const sortedChips = {};

document.querySelectorAll('#sortChips .chip').forEach(chip => {
  chip.addEventListener('click', function() {
    if (this.dataset.answered === 'true') return;
    
    document.querySelectorAll('#sortChips .chip').forEach(c => {
      if (c.dataset.answered === 'false') {
        c.classList.remove('selected');
      }
    });
    
    this.classList.add('selected');
    selectedChip = this;
    
    document.getElementById('sortHint').textContent = 'üëâ Now tap Survey or Forum button below';
    document.getElementById('sortHint').className = 'feedback info show';
  });
});

document.getElementById('btnSurvey')?.addEventListener('click', function() {
  if (!selectedChip) {
    document.getElementById('sortHint').textContent = '‚ö†Ô∏è Tap a phrase first, then tap this button!';
    document.getElementById('sortHint').className = 'feedback info show';
    return;
  }
  
  selectedChip.dataset.answered = 'true';
  selectedChip.dataset.studentAnswer = 'survey';
  selectedChip.classList.remove('selected');
  selectedChip.style.display = 'none';
  sortedChips[selectedChip.textContent] = 'survey';
  
  // Add to bucket
  const bucket = document.getElementById('surveyBucket');
  if (bucket.querySelector('.small')) {
    bucket.innerHTML = '';
  }
  const chipClone = document.createElement('div');
  chipClone.className = 'bucket-chip';
  chipClone.textContent = selectedChip.textContent;
  bucket.appendChild(chipClone);
  
  selectedChip = null;
  
  document.getElementById('sortHint').textContent = '‚úÖ Added to Survey! Now tap another phrase...';
  document.getElementById('sortHint').className = 'feedback good show';
  
  checkIfAllSorted();
});

document.getElementById('btnForum')?.addEventListener('click', function() {
  if (!selectedChip) {
    document.getElementById('sortHint').textContent = '‚ö†Ô∏è Tap a phrase first, then tap this button!';
    document.getElementById('sortHint').className = 'feedback info show';
    return;
  }
  
  selectedChip.dataset.answered = 'true';
  selectedChip.dataset.studentAnswer = 'forum';
  selectedChip.classList.remove('selected');
  selectedChip.style.display = 'none';
  sortedChips[selectedChip.textContent] = 'forum';
  
  // Add to bucket
  const bucket = document.getElementById('forumBucket');
  if (bucket.querySelector('.small')) {
    bucket.innerHTML = '';
  }
  const chipClone = document.createElement('div');
  chipClone.className = 'bucket-chip';
  chipClone.textContent = selectedChip.textContent;
  bucket.appendChild(chipClone);
  
  selectedChip = null;
  
  document.getElementById('sortHint').textContent = '‚úÖ Added to Forum! Now tap another phrase...';
  document.getElementById('sortHint').className = 'feedback good show';
  
  checkIfAllSorted();
});

function checkIfAllSorted() {
  const allChips = document.querySelectorAll('#sortChips .chip');
  const allAnswered = [...allChips].every(c => c.dataset.answered === 'true');
  
  if (allAnswered) {
    document.getElementById('sortHint').textContent = '‚úÖ All sorted! Now click "Check My Answers" below';
    document.getElementById('sortHint').className = 'feedback good show';
    document.getElementById('checkSort').style.display = 'block';
    document.getElementById('checkSort').disabled = false;
  }
}

document.getElementById('checkSort')?.addEventListener('click', function() {
  const allChips = document.querySelectorAll('#sortChips .chip');
  let allCorrect = true;
  
  allChips.forEach(chip => {
    const correctType = chip.dataset.type;
    const studentAnswer = chip.dataset.studentAnswer;
    
    if (correctType !== studentAnswer) {
      allCorrect = false;
    }
  });
  
  const feedback = document.getElementById('sortFeedback');
  if (allCorrect) {
    feedback.className = 'feedback good show';
    feedback.textContent = 'üéâ Perfect! Survey phrases = for reporting numbers and percentages. Forum phrases = for describing what people said.';
    fireConfetti();
    this.disabled = true;
  } else {
    feedback.className = 'feedback bad show';
    feedback.textContent = '‚ùå Some are wrong. Remember: Survey phrases have numbers (four out of five, around two-thirds). Forum phrases describe comments (mentioned, complained, show). Try again!';
    
    // Reset
    sortedChips.length = 0;
    Object.keys(sortedChips).forEach(k => delete sortedChips[k]);
    allChips.forEach(chip => {
      chip.dataset.answered = 'false';
      chip.dataset.studentAnswer = '';
      chip.classList.remove('selected');
      chip.style.display = '';
    });
    document.getElementById('surveyBucket').innerHTML = '<p class="small" style="margin:0; color:var(--muted);">Sorted phrases will appear here...</p>';
    document.getElementById('forumBucket').innerHTML = '<p class="small" style="margin:0; color:var(--muted);">Sorted phrases will appear here...</p>';
    document.getElementById('sortHint').textContent = 'üëÜ Tap a phrase above, then tap Survey or Forum button';
    document.getElementById('sortHint').className = 'feedback info show';
    this.style.display = 'none';
  }
});

// STEP 3: FILL BLANKS WITH UPDATED PERCENTAGES
document.getElementById('checkBlanksStep3')?.addEventListener('click', function() {
  const b1 = document.getElementById('blank1Step3').value;
  const b2 = document.getElementById('blank2Step3').value;
  const b3 = document.getElementById('blank3Step3').value;
  
  if (!b1 || !b2 || !b3) {
    const feedback = document.getElementById('blanksStep3Feedback');
    feedback.className = 'feedback info show';
    feedback.textContent = '‚ö†Ô∏è Please answer all three questions first!';
    return;
  }
  
  const correct1 = b1 === '85';
  const correct2 = b2 === 'clean';
  const correct3 = b3 === '3out5';
  
  document.getElementById('blank1Step3').className = 'blank-input ' + (correct1 ? 'correct' : 'incorrect');
  document.getElementById('blank2Step3').className = 'blank-input ' + (correct2 ? 'correct' : 'incorrect');
  document.getElementById('blank3Step3').className = 'blank-input ' + (correct3 ? 'correct' : 'incorrect');
  
  const feedback = document.getElementById('blanksStep3Feedback');
  if (correct1 && correct2 && correct3) {
    feedback.className = 'feedback good show';
    feedback.textContent = 'üéâ Perfect! Q1: slightly more than four-fifths (85%) for Wi-Fi. Q2: room cleanliness (70%). Q3: three out of five (60%) for breakfast.';
    fireConfetti();
    this.disabled = true;
  } else {
    feedback.className = 'feedback bad show';
    let hints = '‚ùå Check: ';
    if (!correct1) hints += 'Q1 = slightly more than four-fifths (85%) for Wi-Fi. ';
    if (!correct2) hints += 'Q2 = room cleanliness (70%). ';
    if (!correct3) hints += 'Q3 = three out of five (60%) for breakfast. ';
    feedback.textContent = hints;
  }
});

// STEP 4: FORUM MULTIPLE CHOICE Q1
document.getElementById('checkForumQ1')?.addEventListener('click', function() {
  const selected = document.querySelector('input[name="forumQ1"]:checked');
  
  if (!selected) {
    const feedback = document.getElementById('forumQ1Feedback');
    feedback.className = 'feedback info show';
    feedback.textContent = '‚ö†Ô∏è Please select an answer first!';
    return;
  }
  
  const labels = document.querySelectorAll('.quiz-options label');
  labels.forEach(label => {
    const radio = label.querySelector('input[type="radio"]');
    if (radio.value === 'A') {
      label.classList.add('correct');
    } else if (radio.checked) {
      label.classList.add('incorrect');
    }
  });
  
  const feedback = document.getElementById('forumQ1Feedback');
  if (selected.value === 'A') {
    feedback.className = 'feedback good show';
    feedback.textContent = 'üéâ Correct! Option A paraphrases professionally and cites the forum. It doesn\'t copy words or name the customer.';
    fireConfetti();
  } else if (selected.value === 'B') {
    feedback.className = 'feedback bad show';
    feedback.textContent = '‚ùå Option B names the customer (Lisa Wong) and copies her exact words. Use "Comments from the forum..." and paraphrase.';
  } else {
    feedback.className = 'feedback bad show';
    feedback.textContent = '‚ùå Option C uses "I think" = personal opinion. Always cite the source (forum, survey), not your opinion.';
  }
  
  this.disabled = true;
});

// STEP 4: FORUM MATCHING (IMPROVED WITH CLEAR VISUAL FEEDBACK)
let selectedForumComment = null;
let selectedForumParaphrase = null;
const forumMatches = {};
let forumMatchCount = 0;

document.querySelectorAll('#forumMatch .match-item').forEach(item => {
  item.addEventListener('click', function() {
    if (this.classList.contains('correct') || this.classList.contains('matched')) return;
    
    const isComment = this.dataset.comment;
    const isParaphrase = this.dataset.paraphrase;
    
    if (isComment) {
      // Deselect other comments
      document.querySelectorAll('[data-comment]').forEach(s => {
        if (!s.classList.contains('matched')) {
          s.classList.remove('selected');
        }
      });
      this.classList.add('selected');
      selectedForumComment = this.dataset.comment;
    } else if (isParaphrase) {
      // Deselect other paraphrases
      document.querySelectorAll('[data-paraphrase]').forEach(c => {
        if (!c.classList.contains('matched')) {
          c.classList.remove('selected');
        }
      });
      this.classList.add('selected');
      selectedForumParaphrase = this.dataset.paraphrase;
    }
    
    // If both selected, make the match
    if (selectedForumComment && selectedForumParaphrase) {
      forumMatches[selectedForumComment] = selectedForumParaphrase;
      
      // Mark both as matched (not finalized yet)
      const commentElem = document.querySelector(`[data-comment="${selectedForumComment}"]`);
      const paraphraseElem = document.querySelector(`[data-paraphrase="${selectedForumParaphrase}"]`);
      
      commentElem.classList.remove('selected');
      commentElem.classList.add('matched');
      commentElem.dataset.pair = selectedForumParaphrase;
      
      paraphraseElem.classList.remove('selected');
      paraphraseElem.classList.add('matched');
      paraphraseElem.dataset.pair = selectedForumComment;
      
      selectedForumComment = null;
      selectedForumParaphrase = null;
      forumMatchCount++;
      
      if (forumMatchCount === 3) {
        document.getElementById('checkForumMatch').style.display = 'block';
      }
    }
  });
});

document.getElementById('checkForumMatch')?.addEventListener('click', function() {
  const correct = forumMatches.A === 'A' && forumMatches.B === 'B' && forumMatches.C === 'C';
  const feedback = document.getElementById('forumMatchFeedback');
  
  if (correct) {
    document.querySelectorAll('#forumMatch .match-item').forEach(item => {
      item.classList.remove('matched');
      item.classList.add('correct');
    });
    feedback.className = 'feedback good show';
    feedback.textContent = 'üéâ Excellent! A = slow service, B = noisy restaurant, C = small portions. You matched all correctly!';
    fireConfetti();
    this.disabled = true;
  } else {
    feedback.className = 'feedback bad show';
    feedback.textContent = '‚ùå Not quite right. Read carefully: A = waiter/order problems ‚Üí service was slow. B = noise/tables ‚Üí too noisy. C = portions/price ‚Üí portions too small. Try again!';
    
    // Reset
    Object.keys(forumMatches).forEach(k => delete forumMatches[k]);
    document.querySelectorAll('#forumMatch .match-item').forEach(item => {
      item.classList.remove('selected', 'matched');
      item.dataset.pair = '';
    });
    forumMatchCount = 0;
    this.style.display = 'none';
  }
});

// STEP 5: INLINE EDITING WITH CLICK-TO-FIX
const fixData = {
  1: {
    original: "Around two-thirds (65%)",
    correct: "According to the customer satisfaction survey (Nov 2025), around two-thirds (65%)",
    options: [
      "According to the customer satisfaction survey (Nov 2025), around two-thirds (65%)",
      "I believe that around two-thirds (65%)",
      "Many people said that around two-thirds (65%)"
    ]
  },
  2: {
    original: "Many people complained that",
    correct: "Comments from the online customer forum show that",
    options: [
      "Some customers said that",
      "Comments from the online customer forum show that",
      "Lots of people mentioned that"
    ]
  },
  3: {
    original: "I think we should",
    correct: "As around two-thirds (65%) of respondents were dissatisfied with opening hours, I suggest that we",
    options: [
      "I strongly believe we should",
      "As around two-thirds (65%) of respondents were dissatisfied with opening hours, I suggest that we",
      "We must definitely"
    ]
  },
  4: {
    original: "Customers also mentioned that staff",
    correct: "Feedback from the forum also shows that customers",
    options: [
      "People also said that staff",
      "Customers also mentioned that staff",
      "Feedback from the forum also shows that customers"
    ]
  },
  5: {
    original: "I strongly think these findings",
    correct: "The recommendations made based on these findings",
    options: [
      "The recommendations made based on these findings",
      "I really hope these findings",
      "These findings probably"
    ]
  }
};

let fixedCount = 0;

document.querySelectorAll('.editable-text').forEach(elem => {
  elem.addEventListener('click', function(e) {
    if (this.classList.contains('fixed')) return;
    
    const errorNum = this.dataset.error;
    const data = fixData[errorNum];
    
    const menu = document.getElementById('fixMenu');
    const optionsDiv = document.getElementById('fixOptions');
    optionsDiv.innerHTML = '';
    
    data.options.forEach(opt => {
      const btn = document.createElement('button');
      btn.className = 'btn small';
      btn.textContent = opt;
      btn.style.width = '100%';
      btn.style.textAlign = 'left';
      btn.style.fontSize = '0.85rem';
      btn.style.whiteSpace = 'normal';
      btn.style.lineHeight = '1.4';
      
      btn.addEventListener('click', () => {
        if (opt === data.correct) {
          elem.textContent = data.correct;
          elem.classList.add('fixed');
          fixedCount++;
          
          if (fixedCount === 5) {
            document.getElementById('checkAllFixes').style.display = 'block';
          }
        } else {
          elem.style.animation = 'shake 0.3s';
          setTimeout(() => elem.style.animation = '', 300);
        }
        menu.style.display = 'none';
      });
      
      optionsDiv.appendChild(btn);
    });
    
    const rect = this.getBoundingClientRect();
    menu.style.display = 'block';
    menu.style.left = Math.min(rect.left, window.innerWidth - 420) + 'px';
    menu.style.top = (rect.bottom + 10) + 'px';
    
    e.stopPropagation();
  });
});

document.addEventListener('click', function() {
  document.getElementById('fixMenu').style.display = 'none';
});

document.getElementById('checkAllFixes')?.addEventListener('click', function() {
  const feedback = document.getElementById('proofreadFeedback');
  feedback.className = 'feedback good show';
  feedback.textContent = 'üéâ Excellent work! All 5 errors fixed: (1) added source+date, (2) cited forum, (3) linked to data, (4) cited forum source, (5) removed personal opinion. Great proofreading!';
  fireConfetti();
  this.disabled = true;
  this.textContent = 'Completed ‚úì';
});

// EXTRA: ACADEMIC MATCHING (IMPROVED WITH VISUAL FEEDBACK)
let selectedAcademicSource = null;
let selectedAcademicCitation = null;
const academicMatches = {};
let academicMatchCount = 0;

document.querySelectorAll('#academicMatch .match-item').forEach(item => {
  item.addEventListener('click', function() {
    if (this.classList.contains('correct') || this.classList.contains('matched')) return;
    
    const isSource = this.dataset.source;
    const isCitation = this.dataset.citation;
    
    if (isSource) {
      document.querySelectorAll('[data-source]').forEach(s => {
        if (!s.classList.contains('matched')) {
          s.classList.remove('selected');
        }
      });
      this.classList.add('selected');
      selectedAcademicSource = this.dataset.source;
    } else if (isCitation) {
      document.querySelectorAll('[data-citation]').forEach(c => {
        if (!c.classList.contains('matched')) {
          c.classList.remove('selected');
        }
      });
      this.classList.add('selected');
      selectedAcademicCitation = this.dataset.citation;
    }
    
    if (selectedAcademicSource && selectedAcademicCitation) {
      academicMatches[selectedAcademicSource] = selectedAcademicCitation;
      
      const sourceElem = document.querySelector(`[data-source="${selectedAcademicSource}"]`);
      const citationElem = document.querySelector(`[data-citation="${selectedAcademicCitation}"]`);
      
      sourceElem.classList.remove('selected');
      sourceElem.classList.add('matched');
      sourceElem.dataset.pair = selectedAcademicCitation;
      
      citationElem.classList.remove('selected');
      citationElem.classList.add('matched');
      citationElem.dataset.pair = selectedAcademicSource;
      
      selectedAcademicSource = null;
      selectedAcademicCitation = null;
      academicMatchCount++;
      
      if (academicMatchCount === 3) {
        document.getElementById('checkMatches').style.display = 'block';
      }
    }
  });
});

document.getElementById('checkMatches')?.addEventListener('click', function() {
  const correct = academicMatches.survey === 'survey' && academicMatches.article === 'article' && academicMatches.report === 'report';
  const feedback = document.getElementById('matchFeedback');
  
  if (correct) {
    document.querySelectorAll('#academicMatch .match-item').forEach(item => {
      item.classList.remove('matched');
      item.classList.add('correct');
    });
    feedback.className = 'feedback good show';
    feedback.textContent = 'üéâ Excellent! Survey 2023 ‚Üí (Customer survey, 2023). Dr Chan 2022 ‚Üí (Chan, 2022). VTC 2021 ‚Üí (VTC, 2021). All correct!';
    fireConfetti();
    this.disabled = true;
  } else {
    feedback.className = 'feedback bad show';
    feedback.textContent = '‚ùå Not quite right. Match the years and names: VTC (2021), Chan (2022), Survey (2023). Try again!';
    
    Object.keys(academicMatches).forEach(k => delete academicMatches[k]);
    document.querySelectorAll('#academicMatch .match-item').forEach(item => {
      item.classList.remove('selected', 'matched');
      item.dataset.pair = '';
    });
    academicMatchCount = 0;
    this.style.display = 'none';
  }
});

// EXTRA: FILL BLANKS
document.getElementById('checkBlanksExtra')?.addEventListener('click', function() {
  const b1 = document.getElementById('blank1Extra').value.trim().toLowerCase();
  const b2 = document.getElementById('blank2Extra').value.trim();
  const b3 = document.getElementById('blank3Extra').value.trim().toLowerCase();
  const b4 = document.getElementById('blank4Extra').value.trim();
  
  if (!b1 || !b2 || !b3 || !b4) {
    const feedback = document.getElementById('blankFeedbackExtra');
    feedback.className = 'feedback info show';
    feedback.textContent = '‚ö†Ô∏è Please fill in all blanks first!';
    return;
  }
  
  const correct1 = b1 === 'vtc';
  const correct2 = b2 === '2021';
  const correct3 = b3 === 'chan';
  const correct4 = b4 === '2022';
  
  document.getElementById('blank1Extra').className = 'blank-input ' + (correct1 ? 'correct' : 'incorrect');
  document.getElementById('blank2Extra').className = 'blank-input ' + (correct2 ? 'correct' : 'incorrect');
  document.getElementById('blank3Extra').className = 'blank-input ' + (correct3 ? 'correct' : 'incorrect');
  document.getElementById('blank4Extra').className = 'blank-input ' + (correct4 ? 'correct' : 'incorrect');
  
  const feedback = document.getElementById('blankFeedbackExtra');
  
  if (correct1 && correct2 && correct3 && correct4) {
    feedback.className = 'feedback good show';
    feedback.textContent = 'üéâ Perfect! Sentence 1: VTC (2021). Sentence 2: Chan (2022). Academic format = (Author/Organisation, Year).';
    fireConfetti();
    this.disabled = true;
    this.textContent = 'Completed ‚úì';
  } else {
    feedback.className = 'feedback bad show';
    feedback.textContent = '‚ùå Check your spelling. Sentence 1: VTC, 2021. Sentence 2: Chan, 2022. Use lowercase letters.';
  }
});

// Add shake animation for wrong answers
const style = document.createElement('style');
style.textContent = `
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  75% { transform: translateX(10px); }
}
`;
document.head.appendChild(style);

show('home');

window.addEventListener('load', function() {
  if (document.activeElement) {
    document.activeElement.blur();
  }
  document.body.style.outline = 'none';
});

document.addEventListener('keydown', function(e) {
  if (e.key === 'Tab') {
    document.body.style.outline = '';
  }
});
</script>
</body>
</html>
